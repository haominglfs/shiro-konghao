<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="rbac" >
  <resultMap id="mapPerm" type="cn.com.qxl.shiro.model.SysPerm" >
    <id column="ID" property="id" jdbcType="BIGINT" />
    <result column="PERMISSION" property="permission" jdbcType="VARCHAR" />
    <result column="URL" property="url" jdbcType="VARCHAR" />
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
    <result column="AVAILABLE" property="available" jdbcType="BIT" />
  </resultMap>
  
  <resultMap id="mapRole" type="cn.com.qxl.shiro.model.SysRoles" >
    <id column="ID" property="id" jdbcType="BIGINT" />
    <result column="ROLE" property="role" jdbcType="VARCHAR" />
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
    <result column="AVAILABLE" property="available" jdbcType="BIT" />
  </resultMap>
  
  <resultMap id="mapRolePerm" type="cn.com.qxl.shiro.model.SysRolesPerm" >
    <id column="ROLE_ID" property="roleId" jdbcType="BIGINT" />
    <id column="PERMISSION_ID" property="permissionId" jdbcType="BIGINT" />
  </resultMap>
  
  <resultMap id="mapUser" type="cn.com.qxl.shiro.model.SysUsers" >
    <id column="ID" property="id" jdbcType="BIGINT" />
    <result column="USERNAME" property="username" jdbcType="VARCHAR" />
    <result column="PASSWORD" property="password" jdbcType="VARCHAR" />
    <result column="SALT" property="salt" jdbcType="VARCHAR" />
    <result column="LOCKED" property="locked" jdbcType="BIT" />
  </resultMap>
  
  <resultMap id="mapUserRole" type="cn.com.qxl.shiro.model.SysUsersRoles" >
    <id column="USER_ID" property="userId" jdbcType="BIGINT" />
    <id column="ROLE_ID" property="roleId" jdbcType="BIGINT" />
  </resultMap>

  <sql id="fPerm" >
    p.ID, 	
    p.PERMISSION, 	
    p.URL, 	
    p.DESCRIPTION, 	
    p.AVAILABLE	
  </sql>
  
  <sql id="fRolePerm" >
    rp.ROLE_ID, 	
    rp.PERMISSION_ID
  </sql>
  <sql id="insertKeysRolePerm" >
    (
    	<include refid='fRolePerm'/>
    )
  </sql>
  
  <!-- 插入字段值 -->
  <sql id="insertValuesRolePerm" >
    (
    	#{model.roleId,jdbcType=BIGINT},
    	#{model.permissionId,jdbcType=BIGINT}
    )
  </sql>
  <sql id="fRole" >
    r.ID, 	
    r.ROLE, 	
    r.DESCRIPTION, 	
    r.AVAILABLE	
  </sql>
  
  <sql id="fUserRole" >
    ur.USER_ID, 	
    ur.ROLE_ID
  </sql>
<!-- 插入字段键 -->
  <sql id="insertKeysUserRole" >
    (
    	<include refid='fUserRole'/>
    )
  </sql>
  
  <!-- 插入字段值 -->
  <sql id="insertValuesUserRole" >
    (
    	#{model.userId,jdbcType=BIGINT},
    	#{model.roleId,jdbcType=BIGINT}
    )
  </sql>
  
  <sql id="fUser" >
    U.ID, 	
    U.USERNAME, 	
    U.PASSWORD, 	
    U.SALT, 	
    U.LOCKED	
  </sql>
  <sql id="tbUser" >
    SYS_USERS
  </sql>
  <sql id="tbRole" >
    SYS_ROLES
  </sql>
  <sql id="tbPerm" >
    SYS_PERMISSIONS
  </sql>
  <sql id="tbUserRole" >
    SYS_USERS_ROLES
  </sql>
  <sql id="tbRolePerm" >
    SYS_ROLES_PERMISSIONS
  </sql>
</mapper>